Created MockAuthService
Verbose logging turned on
{
  message: 'WARNING!!! process.env.NODE_ENV is not defined.To disable the module set process.env.NODE_ENV to any of the supplied ignoredNodeEnvironments: production',
  level: 'warn',
  service: 'express-oas-generator',
  timestamp: '2023-04-28T22:20:42.419Z'
}
Supported Lechmere protocols: [lechmere.7,lechmere.6,lechmere.4,lechmere.3]
Mock Accounts Replication server is ready
Mock Recycle Service server is ready
Mock Internal Recycle Service server is ready
Mock Metrics Config server is ready
Mock Entitlements server is ready
Mock Grants server is ready
Postman generator service is ready
Registration timeout set to 10 seconds
Logs can be found with: GET /request/api/logs
SSL Session history can be found with: GET /request/sessions/logs
Logs can be cleared with: GET /request/*/clear 
AuthZ service created. Manage at http://localhost:51215/authz/mock/config.html
Cloud feature config service using: {"enableMusicAccountReplication":true,"enableApiKeyValidation":false,"enableExternalPartnerMode":false,"enableMuseCmdParamReporting":false,"disableWebSocketPerMessageDeflate":false,"enableVoiceDataCollection":false,"metricsConfigURL":null,"metricsService":{"submissionIntervalSeconds":300,"wifiTxRateThreshold":0,"wifiLatencyThresholdMillis":0},"spotifyAdaptiveBitrate":{"enable":false,"timeoutMinutes":120,"thresholdDC":5},"accessPolicyControl":{"enableCloudSetting":false,"defaultValue":"INSECURE"},"enableUPnPOverTLS":{"commandControl":false,"subscriptionControl":false,"eventControl":false},"enableThorForMuseV1":false,"enableLechmereV7":false}
Mock Playback Link server is ready.
Using mock cloud services
Runtime OAS Generator is ready
Server listening on http://localhost:51215
Websocket REST API: /websockets/api/v0
Server listening for SSL on https://localhost:45557
Server listening for mutual SSL on https://localhost:46721
200 [04/28/23 10:20:43 pm] GET /request/api/logs SWGen=-
200 [04/28/23 10:20:43 pm] POST /auth/oauth/v3/clients?clientKey=e61bc77c-39cd-4ed0-a5e7-5ad316a0efc5&keyName=test SWGen=-
200 [04/28/23 10:20:43 pm] GET /request/api/logs/clear SWGen=-
200 [04/28/23 10:20:54 pm] POST /auth/oauth/v2/create-user-token SWGen=-
200 [04/28/23 10:20:56 pm] GET /auth/oauth/v2/validate?access_token=1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-bcaf-c740d1761ad3f1299f30-e612-11ed-b SWGen=2
Client using [lechmere.7] protocol
[
  {
    namespace: 'topology:1',
    householdId: 'Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP',
    locationId: 'lc_8f0ce43f18fe4bd980d4c9b506e4eb34',
    name: 'cloudRegistration',
    type: 'cloudRegistrationStatus'
  },
  {
    sonosId: '998936323',
    householdLocationId: 'Vjb3AgYAI6VHS+Y43VbsJw==',
    museHouseholdId: 'Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP.0OWwOKa1RJHemxNF3QE6',
    playerId: 'RINCON_00038610389E01400',
    groupId: 'RINCON_00038610389E01400:3507478278',
    sessionId: null,
    roomName: 'Emulator',
    groupName: 'Emulator',
    serial: '00038610389E',
    model: 'S39',
    modelDisplayName: 'Era 100',
    ipAddr: '172.18.255.250',
    port: 1400,
    isCoordinator: true,
    isVisible: true,
    isSatellite: false,
    isSecure: true,
    bootSequenceId: 3,
    hwVersion: '1.38.1.0-1.0',
    swVersion: '74.0-40280-dev-build-20230428-main',
    swGen: 2,
    dhcpMac: '00038610389E',
    networkIPAddress: '172.18.0.0',
    networkMask: '255.255.0.0',
    systemUptimeSeconds: 992,
    anacapaUptimeSeconds: 3,
    apiVersion: '1.35.0-alpha.4-19-g0052763f+a9cf4db850.74.0-40280',
    minApiVersion: '1.1.0',
    capabilities: [
      'CLOUD',
      'PLAYBACK',
      'AIRPLAY',
      'LINE_IN',
      'VOICE',
      'AUDIO_CLIP',
      'MICROPHONE_SWITCH'
    ],
    householdId: 'Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP',
    locationId: 'lc_8f0ce43f18fe4bd980d4c9b506e4eb34'
  }
]
Received registration message from [00038610389E]
REGISTRATION ACK sent to [00038610389e]: 07040000{}
My client is: [object Object]
SET CONFIG sent to [00038610389e]: 07050000{"museHouseholdId":"Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP.0OWwOKa1RJHemxNF3QE6","locationId":"lc_8f0ce43f18fe4bd980d4c9b506e4eb34"}
200 [04/28/23 10:21:08 pm] POST /auth/oauth/v3/clients?clientKey=e61bc77c-39cd-4ed0-a5e7-5ad316a0efc5&keyName=test SWGen=-
200 [04/28/23 10:21:08 pm] GET /request/api/logs/clear SWGen=-
200 [04/28/23 10:21:12 pm] GET /entitlements/api/v1/users/998936323/entitlements SWGen=2
[WARNING] JSON schema validation is currently disabled for GET /v1/users/998936323/settings?targetSettingsOnly=false 
	See the "JSON Schema Validation" section in the README for more information.
200 [04/28/23 10:21:12 pm] GET /api/v1/users/998936323/settings?targetSettingsOnly=false SWGen=2
200 [04/28/23 10:21:12 pm] GET /features/v1/config?swVersion=74.0-40280-dev-build-20230428-main&hwVersion=1.38.1.0-1.0 SWGen=2
Client using [lechmere.6] protocol
[
  {
    namespace: 'topology:1',
    householdId: 'Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP',
    locationId: 'lc_8f0ce43f18fe4bd980d4c9b506e4eb34',
    name: 'cloudRegistration',
    type: 'cloudRegistrationStatus'
  },
  {
    sonosId: '998936323',
    householdLocationId: 'Vjb3AgYAI6VHS+Y43VbsJw==',
    museHouseholdId: 'Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP.0OWwOKa1RJHemxNF3QE6',
    playerId: 'RINCON_00038610389E01400',
    groupId: 'RINCON_00038610389E01400:3507478278',
    sessionId: null,
    roomName: 'Emulator',
    groupName: 'Emulator',
    serial: '00038610389E',
    model: 'S39',
    modelDisplayName: 'Era 100',
    ipAddr: '172.18.255.250',
    port: 1400,
    isCoordinator: true,
    isVisible: true,
    isSatellite: false,
    isSecure: true,
    bootSequenceId: 3,
    hwVersion: '1.38.1.0-1.0',
    swVersion: '74.0-40280-dev-build-20230428-main',
    swGen: 2,
    dhcpMac: '00038610389E',
    networkIPAddress: '172.18.0.0',
    networkMask: '255.255.0.0',
    systemUptimeSeconds: 992,
    anacapaUptimeSeconds: 3,
    apiVersion: '1.35.0-alpha.4-19-g0052763f+a9cf4db850.74.0-40280',
    minApiVersion: '1.1.0',
    capabilities: [
      'CLOUD',
      'PLAYBACK',
      'AIRPLAY',
      'LINE_IN',
      'VOICE',
      'AUDIO_CLIP',
      'MICROPHONE_SWITCH'
    ],
    householdId: 'Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP',
    locationId: 'lc_8f0ce43f18fe4bd980d4c9b506e4eb34'
  }
]
Received registration message from [00038610389E]
REGISTRATION ACK sent to [00038610389e]: 06040000{}
My client is: [object Object]
SET CONFIG sent to [00038610389e]: 06050000{"museHouseholdId":"Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP.0OWwOKa1RJHemxNF3QE6","locationId":"lc_8f0ce43f18fe4bd980d4c9b506e4eb34"}
[
  {
    namespace: 'topology:1',
    householdId: 'Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP',
    name: 'cloudRegistration',
    type: 'cloudRegistrationStatus'
  },
  {
    sonosId: '998936323',
    householdLocationId: 'Vjb3AgYAI6VHS+Y43VbsJw==',
    museHouseholdId: 'Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP.0OWwOKa1RJHemxNF3QE6',
    playerId: 'RINCON_00038610389E01400',
    groupId: 'RINCON_00038610389E01400:3507478278',
    sessionId: null,
    roomName: 'Emulator',
    groupName: 'Emulator',
    serial: '00038610389E',
    model: 'S39',
    modelDisplayName: 'Era 100',
    ipAddr: '172.18.255.250',
    port: 1400,
    isCoordinator: true,
    isVisible: true,
    isSatellite: false,
    isSecure: true,
    bootSequenceId: 3,
    hwVersion: '1.38.1.0-1.0',
    swVersion: '74.0-40280-dev-build-20230428-main',
    swGen: 2,
    dhcpMac: '00038610389E',
    networkIPAddress: '172.18.0.0',
    networkMask: '255.255.0.0',
    systemUptimeSeconds: 1000,
    anacapaUptimeSeconds: 11,
    apiVersion: '1.35.0-alpha.4-19-g0052763f+a9cf4db850.74.0-40280',
    minApiVersion: '1.1.0',
    capabilities: [
      'CLOUD',
      'PLAYBACK',
      'AIRPLAY',
      'LINE_IN',
      'VOICE',
      'AUDIO_CLIP',
      'MICROPHONE_SWITCH'
    ],
    householdId: 'Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP',
    locationId: undefined
  }
]
Received registration message from [00038610389E]
*** Looks like a SET CONFIG response ***
My client is: [object Object]
Client using [lechmere.6] protocol
[
  {
    namespace: 'topology:1',
    householdId: 'Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP',
    name: 'cloudRegistration',
    type: 'cloudRegistrationStatus'
  },
  {
    sonosId: '998936323',
    householdLocationId: 'Vjb3AgYAI6VHS+Y43VbsJw==',
    museHouseholdId: 'Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP.0OWwOKa1RJHemxNF3QE6',
    playerId: 'RINCON_00038610389E01400',
    groupId: 'RINCON_00038610389E01400:689046657',
    sessionId: null,
    roomName: 'Emulator',
    groupName: 'Emulator',
    serial: '00038610389E',
    model: 'S39',
    modelDisplayName: 'Era 100',
    ipAddr: '172.18.255.250',
    port: 1400,
    isCoordinator: true,
    isVisible: true,
    isSatellite: false,
    isSecure: true,
    bootSequenceId: 4,
    hwVersion: '1.38.1.0-1.0',
    swVersion: '74.0-40280-dev-build-20230428-main',
    swGen: 2,
    dhcpMac: '00038610389E',
    networkIPAddress: '172.18.0.0',
    networkMask: '255.255.0.0',
    systemUptimeSeconds: 1009,
    anacapaUptimeSeconds: 3,
    apiVersion: '1.35.0-alpha.4-19-g0052763f+a9cf4db850.74.0-40280',
    minApiVersion: '1.1.0',
    capabilities: [
      'CLOUD',
      'PLAYBACK',
      'AIRPLAY',
      'LINE_IN',
      'VOICE',
      'AUDIO_CLIP',
      'MICROPHONE_SWITCH'
    ],
    householdId: 'Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP',
    locationId: undefined
  }
]
Received registration message from [00038610389E]
REGISTRATION ACK sent to [00038610389e]: 06040000{}
My client is: [object Object]
SET CONFIG sent to [00038610389e]: 06050000{"museHouseholdId":"Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP.0OWwOKa1RJHemxNF3QE6"}
200 [04/28/23 10:21:27 pm] GET /entitlements/api/v1/users/998936323/entitlements SWGen=2
[WARNING] JSON schema validation is currently disabled for GET /v1/users/998936323/settings?targetSettingsOnly=false 
	See the "JSON Schema Validation" section in the README for more information.
200 [04/28/23 10:21:28 pm] GET /api/v1/users/998936323/settings?targetSettingsOnly=false SWGen=2
{
  connection: 'close',
  host: 'music-accounts.dev.ws.sonos.com:46721',
  accept: '*/*',
  'user-agent': 'Linux UPnP/1.0 Sonos/74.0-40280-dev-build-20230428-main (ZPS39)',
  'content-type': 'application/xml',
  'transfer-encoding': 'chunked',
  'x-sonos-swgen': '2',
  'x-sonos-firmware': '74.0-40280-dev-build-20230428-main',
  'x-sonos-muse-api': '1.35.0-alpha.4-19-g0052763f+a9cf4db850',
  'x-sonos-id-hash': 'GrCyaV11UX5Prp5RW4zCu24/vXLgR0TBdQuE98Q2jlY=',
  'x-sonos-musehouseholdid': 'Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP.0OWwOKa1RJHemxNF3QE6',
  'x-sonos-sync-method': 'full'
}
householdId is Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP.0OWwOKa1RJHemxNF3QE6
Accounts updated by player request
Received 1 accounts
[{"$":{"Type":"81671","SerialNum":"1","Flags":"2","VClockHousehold":"RINCON_00038610389E01400:3"},"UN":"X_#Svc81671-0-Token","MD":"1","OADevID":"Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP","Hash":"VPs74iJ64dnMK9FsYasSWw==","Token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkYXRhIjoieDFpcUptS1FIVFNtaGlDTk54NDRSRm0zU0lKMSIsImlhdCI6MTY4MjcyMDQ3MywiZXhwIjoxNjgyNzI0MDcyfQ.0v6akC5XFCgr70pozPz_x6nPRBksQlCOtnZ0xOOXT2s","Key":"fQo3Akv4TuYlCwoCkkBkf1YokakigNzH"}]
changed muse household id row 1
200 [04/28/23 10:21:28 pm] POST /music-account/v0/accounts SWGen=2
200 [04/28/23 10:21:30 pm] GET /features/v1/config?swVersion=74.0-40280-dev-build-20230428-main&hwVersion=1.38.1.0-1.0 SWGen=2
200 [04/28/23 10:22:16 pm] POST /features/v1/set-config-properties SWGen=-
200 [04/28/23 10:22:16 pm] GET /features/v1/config?swVersion=74.0-40280-dev-build-20230428-main&hwVersion=1.38.1.0-1.0 SWGen=2
200 [04/28/23 10:22:16 pm] GET /zpMetricsConfig/prod SWGen=2
Client using [lechmere.6] protocol
[
  {
    namespace: 'topology:1',
    householdId: 'Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP',
    name: 'cloudRegistration',
    type: 'cloudRegistrationStatus'
  },
  {
    sonosId: '998936323',
    householdLocationId: 'Vjb3AgYAI6VHS+Y43VbsJw==',
    museHouseholdId: 'Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP.0OWwOKa1RJHemxNF3QE6',
    playerId: 'RINCON_00038610389E01400',
    groupId: 'RINCON_00038610389E01400:2039833365',
    sessionId: null,
    roomName: 'Emulator',
    groupName: 'Emulator',
    serial: '00038610389E',
    model: 'S39',
    modelDisplayName: 'Era 100',
    ipAddr: '172.18.255.250',
    port: 1400,
    isCoordinator: true,
    isVisible: true,
    isSatellite: false,
    isSecure: true,
    bootSequenceId: 5,
    hwVersion: '1.38.1.0-1.0',
    swVersion: '74.0-40280-dev-build-20230428-main',
    swGen: 2,
    dhcpMac: '00038610389E',
    networkIPAddress: '172.18.0.0',
    networkMask: '255.255.0.0',
    systemUptimeSeconds: 1072,
    anacapaUptimeSeconds: 2,
    apiVersion: '1.35.0-alpha.4-19-g0052763f+a9cf4db850.74.0-40280',
    minApiVersion: '1.1.0',
    capabilities: [
      'CLOUD',
      'PLAYBACK',
      'AIRPLAY',
      'LINE_IN',
      'VOICE',
      'AUDIO_CLIP',
      'MICROPHONE_SWITCH'
    ],
    householdId: 'Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP',
    locationId: undefined
  }
]
Received registration message from [00038610389E]
REGISTRATION ACK sent to [00038610389e]: 06040000{}
My client is: [object Object]
SET CONFIG sent to [00038610389e]: 06050000{"museHouseholdId":"Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP.0OWwOKa1RJHemxNF3QE6"}
200 [04/28/23 10:22:27 pm] GET /request/api/logs SWGen=-
200 [04/28/23 10:22:30 pm] GET /entitlements/api/v1/users/998936323/entitlements SWGen=2
[WARNING] JSON schema validation is currently disabled for GET /v1/users/998936323/settings?targetSettingsOnly=false 
	See the "JSON Schema Validation" section in the README for more information.
200 [04/28/23 10:22:31 pm] GET /api/v1/users/998936323/settings?targetSettingsOnly=false SWGen=2
200 [04/28/23 10:22:34 pm] GET /features/v1/config?swVersion=74.0-40280-dev-build-20230428-main&hwVersion=1.38.1.0-1.0 SWGen=2
200 [04/28/23 10:22:34 pm] GET /zpMetricsConfig/prod SWGen=2
Client using [lechmere.6] protocol
200 [04/28/23 10:23:31 pm] GET /entitlements/api/v1/users/998936323/entitlements SWGen=2
[
  {
    namespace: 'topology:1',
    householdId: 'Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP',
    name: 'cloudRegistration',
    type: 'cloudRegistrationStatus'
  },
  {
    sonosId: '998936323',
    householdLocationId: 'Vjb3AgYAI6VHS+Y43VbsJw==',
    museHouseholdId: 'Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP.0OWwOKa1RJHemxNF3QE6',
    playerId: 'RINCON_00038610389E01400',
    groupId: 'RINCON_00038610389E01400:3003262077',
    sessionId: null,
    roomName: 'Emulator',
    groupName: 'Emulator',
    serial: '00038610389E',
    model: 'S39',
    modelDisplayName: 'Era 100',
    ipAddr: '172.18.255.250',
    port: 1400,
    isCoordinator: true,
    isVisible: true,
    isSatellite: false,
    isSecure: true,
    bootSequenceId: 6,
    hwVersion: '1.38.1.0-1.0',
    swVersion: '74.0-40280-dev-build-20230428-main',
    swGen: 2,
    dhcpMac: '00038610389E',
    networkIPAddress: '172.18.0.0',
    networkMask: '255.255.0.0',
    systemUptimeSeconds: 1138,
    anacapaUptimeSeconds: 2,
    apiVersion: '1.35.0-alpha.4-19-g0052763f+a9cf4db850.74.0-40280',
    minApiVersion: '1.1.0',
    capabilities: [
      'CLOUD',
      'PLAYBACK',
      'AIRPLAY',
      'LINE_IN',
      'VOICE',
      'AUDIO_CLIP',
      'MICROPHONE_SWITCH'
    ],
    householdId: 'Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP',
    locationId: undefined
  }
]
Received registration message from [00038610389E]
REGISTRATION ACK sent to [00038610389e]: 06040000{}
My client is: [object Object]
SET CONFIG sent to [00038610389e]: 06050000{"museHouseholdId":"Sonos_43zDqMMaCLPzrMUSEEJ8mz6UdP.0OWwOKa1RJHemxNF3QE6"}
200 [04/28/23 10:23:32 pm] GET /auth/oauth/v3/clients/flush SWGen=-
